\usepackage{listings} %box per codice sorgente

\newcommand{\code}[1]{\texttt{#1} }

\newcounter{main}
\setcounter{main}{1}


\lstdefinelanguage{BASH}
{
    otherkeywords={=, +, [, ], (, ), \{, \}, *},
    %morecomment=[l]{#},
    %morestring=[s]{"}{"},
    morekeywords={make,apt-get,sudo},
    breaklines=true,
    keywordstyle=\bfseries,
    stringstyle=\color{red},
    emphstyle=\color{black}\bfseries,
    commentstyle=\color{dark-green}\slshape,
}

\lstnewenvironment{bash}[1][firstnumber=\themain,name=main]
  {\lstset{language=BASH,
           basicstyle=\ttfamily\footnotesize,
           numbers=left,
           numberstyle=\tiny\color{gray},
           backgroundcolor=\color{lightgray},
           breaklines=true,
           prebreak=\small\symbol{'134},
           breakatwhitespace=true,
           mathescape=false
           morecomment=[l]{\#}
           #1
          }
}
{\setcounter{main}{\value{lstnumber}}}

%XML
\definecolor{maroon}{rgb}{0.5,0,0}
\definecolor{darkgreen}{rgb}{0,0.5,0}
\lstdefinelanguage{XML}
{
  basicstyle=\ttfamily,
  morestring=[s]{"}{"},
  morecomment=[s]{?}{?},
  morecomment=[s]{!--}{--},
  commentstyle=\color{darkgreen},
  moredelim=[s][\color{black}]{>}{<},
  moredelim=[s][\color{red}]{\ }{=},
  stringstyle=\color{blue},
  identifierstyle=\color{maroon}
}

\lstnewenvironment{xml}[1][firstnumber=\themain,name=main]
  {\lstset{language=xml,
           basicstyle=\ttfamily\footnotesize,
           numbers=left,
           numberstyle=\tiny\color{gray},
           backgroundcolor=\color{lightgray},
           breaklines=true,
           breakatwhitespace=true,
           #1
          }
}
{\setcounter{main}{\value{lstnumber}}}

\newfontfamily\listingsfont[Scale=0.7]{Courier} 
\newfontfamily\listingsfontinline[Scale=0.8]{Courier New} 

\usepackage{color}
\definecolor{sh_comment}{rgb}{0.12, 0.38, 0.18 } %adjusted, in Eclipse: {0.25, 0.42, 0.30 } = #3F6A4D
\definecolor{sh_keyword}{rgb}{0.37, 0.08, 0.25}  % #5F1441
\definecolor{sh_string}{rgb}{0.06, 0.10, 0.98} % #101AF9

\def\lstsmallmath{\leavevmode\ifmmode \scriptstyle \else  \fi}
\def\lstsmallmathend{\leavevmode\ifmmode  \else  \fi}